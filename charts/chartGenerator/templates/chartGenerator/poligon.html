<head>
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<div id="tester" style="width:100%;height:75%;"/>


<script>

	{% if rawData %}
	var rawData = {{rawData}};
	{%endif%}
	
	
	var plot = document.getElementById('tester');
	
	var counter = 0;

	 var data = [{
			x: {{time}},
			y: {{signal}},
			mode:'lines'
			}];


	var layout = {
	title:"Audio signal",
	xaxis: {
			title:"Time [s]",
            rangeslider: {}

        	},
	margin: { t: 0 }

        },
		yaxis: {
			title:"Pressure [Pa]"
        },
		 shapes: []

	};


	Plotly.plot( plot, data,layout);
	
	plot.on('plotly_click', function(data){
	var pts = '';
    for(var i=0; i < data.points.length; i++){
        annotate_text = data.points[i].x ;
		
	//alert('Closest point clicked:\n\n'+annotate_text);
	
       var shapes = [{
    type: 'line',
    x0: annotate_text,
    y0: 0,
    x1: annotate_text,
    yref: 'paper',
    y1: 1,
    line: {
      color: 'red',
      width: 1.5,
      dash: 'dot'
    }
  }];
        Plotly.relayout('tester',{shapes: shapes})
    }
});

</script>
</script>
